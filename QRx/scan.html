<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>QRx - Scan Medicine</title>
  <link rel="stylesheet" href="style.css">
  <script src="https://unpkg.com/html5-qrcode"></script>
</head>
<body>
  <div class="login-container">
    <div class="login-box">
      <h1 class="title">Scan QR Code</h1>
      <p class="subtitle">Scan your medicine’s QR code to verify authenticity</p>

      <div id="reader" style="width: 300px; margin: auto;"></div>
      <div id="result" style="margin-top: 1rem; font-size: 1rem;"></div>

      <button onclick="window.location.href='dashboard.html'">⬅ Back to Dashboard</button>
    </div>
  </div>

  <script>
  
  const medicines = {
    "QRX-001": { name: "Paracetamol 500mg", company: "MediHealth", status: "Authentic" },
    "QRX-002": { name: "Amoxicillin 250mg", company: "SafePharma", status: "Authentic" },
    "QRX-999": { name: "PainAway Capsule", company: "FakePharma", status: "Counterfeit" },
    "QRX-888": { name: "CoughEase Syrup", company: "MediLife", status: "Expired" }
  };

  function onScanSuccess(decodedText) {
    const med = medicines[decodedText];
    const resultDiv = document.getElementById("result");

    if (med) {
      let color = med.status === "Authentic" ? "#28a745" : (med.status === "Expired" ? "#ff9800" : "#f44336");
      resultDiv.innerHTML = `
        <div style="padding:10px; border-radius:10px; background:${color}20;">
          <h3>${med.name}</h3>
          <p>Manufacturer: ${med.company}</p>
          <p>Status: <b style="color:${color}">${med.status}</b></p>
        </div>
      `;
    } else {
      resultDiv.innerHTML = `<p style="color:#f44336;">⚠️ Unknown medicine. Not found in database.</p>`;
    }
  }

  function onScanError(errorMessage) {
    console.warn(`Scan error: ${errorMessage}`);
  }

  const html5QrcodeScanner = new Html5QrcodeScanner(
    "reader", { fps: 10, qrbox: 250 });
  html5QrcodeScanner.render(onScanSuccess, onScanError);
  </script>
</body>
</html>
